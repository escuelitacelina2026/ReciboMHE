<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recibo MHE - Generador</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f0f0f0; }
        .no-print { background: white; padding: 20px; max-width: 600px; margin: 0 auto 20px; border-radius: 8px; shadow: 0 2px 5px rgba(0,0,0,0.2); }
        
        /* Contenedor del Recibo Real */
        #recibo-final { 
            background: white; width: 210mm; min-height: 148mm; /* Tamaño A5 horizontal aprox */
            margin: auto; padding: 40px; border: 1px solid #ccc; position: relative;
        }

        .header { display: flex; justify-content: space-between; align-items: flex-start; }
        .logo { width: 180px; height: auto; }
        .titulo-recibo { text-align: right; }
        
        .cuerpo { margin-top: 30px; font-size: 1.2em; line-height: 1.8; }
        .dato-relleno { font-weight: bold; border-bottom: 1px dotted #000; padding: 0 5px; }
        
        .tabla-totales { width: 100%; margin-top: 30px; border-collapse: collapse; }
        .tabla-totales td { padding: 10px; border: 1px solid #eee; }
        .bg-gris { background: #f9f9f9; font-weight: bold; }

        .firma-box { margin-top: 50px; float: right; text-align: center; width: 250px; }
        .firma-img { width: 200px; display: block; margin: 0 auto -10px; }

        input { padding: 8px; margin: 5px 0; width: 100%; box-sizing: border-box; }
        button { background: #27ae60; color: white; padding: 15px; border: none; width: 100%; cursor: pointer; font-size: 1.1em; border-radius: 5px; }

        /* MAGIA DE IMPRESIÓN */
        @media print {
            .no-print { display: none !important; }
            body { background: white; padding: 0; }
            #recibo-final { border: none; width: 100%; margin: 0; }
        }
    </style>
</head>
<body>

<div class="no-print">
    <h3>Datos para el Recibo</h3>
    <label>Nombre del Cliente:</label>
    <input type="text" id="in-cliente" oninput="actualizar()">
    
    <label>Presupuesto N°:</label>
    <input type="text" id="in-nro" oninput="actualizar()">
    
    <label>Total del Trabajo ($):</label>
    <input type="number" id="in-total" oninput="actualizar()">
    
    <label>Abona ahora ($):</label>
    <input type="number" id="in-pago" oninput="actualizar()">
    
    <button onclick="descargarPDF()">IMPRIMIR / GUARDAR PDF</button>
</div>

<div id="recibo-final">
    <div class="header">
        <img src="mhe.png" class="logo" alt="MHE Logo">
        <div class="titulo-recibo">
            <h1 style="margin:0; color:#2c3e50;">RECIBO</h1>
            <p>Fecha: <span id="fecha-actual"></span></p>
        </div>
    </div>

    <div class="cuerpo">
        He recibido del Sr./Sra. <span class="dato-relleno" id="out-cliente">__________</span> 
        la suma de <strong>$<span id="out-monto">0.00</span></strong> en concepto de pago 
        por los servicios del <strong>Presupuesto N° <span id="out-nro">____</span></strong>.
    </div>

    <table class="tabla-totales">
        <tr>
            <td>Valor Total:</td>
            <td style="text-align: right;">$<span id="out-total">0.00</span></td>
        </tr>
        <tr>
            <td>Abonado en la fecha:</td>
            <td style="text-align: right;"><strong>$<span id="out-pago">0.00</span></strong></td>
        </tr>
        <tr class="bg-gris">
            <td>Saldo Restante:</td>
            <td style="text-align: right; color: #e74c3c;">$<span id="out-restante">0.00</span></td>
        </tr>
    </table>

    <div class="firma-box">
        <img src="firma.png" class="firma-img" alt="Firma">
        <p style="border-top: 1px solid #000; padding-top: 5px;">MHE Full Services</p>
    </div>
</div>

<script>
    // Poner la fecha de hoy automáticamente
    document.getElementById('fecha-actual').innerText = new Date().toLocaleDateString();

    function actualizar() {
        const cliente = document.getElementById('in-cliente').value;
        const nro = document.getElementById('in-nro').value;
        const total = parseFloat(document.getElementById('in-total').value) || 0;
        const pago = parseFloat(document.getElementById('in-pago').value) || 0;
        const restante = total - pago;

        document.getElementById('out-cliente').innerText = cliente || "__________";
        document.getElementById('out-nro').innerText = nro || "____";
        document.getElementById('out-monto').innerText = pago.toLocaleString();
        document.getElementById('out-total').innerText = total.toLocaleString();
        document.getElementById('out-pago').innerText = pago.toLocaleString();
        document.getElementById('out-restante').innerText = restante.toLocaleString();
    }

    function descargarPDF() {
        // Esta es la forma más directa de bajarlo como PDF
        window.print();
    }
</script>

</body>
</html>
